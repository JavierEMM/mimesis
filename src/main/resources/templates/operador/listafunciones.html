<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="includes/head.html :: head">MIMESIS</head>
<body>
<header th:replace="/includes/navbar.html :: navbar(option='Funciones')" id="header" class="d-flex align-items-center">
</header>
<div class="container">
    <div class="row" >
        <div class="col-xl">
            <p class="title">Lista Funciones</p>
        </div>
    </div>
    <div class="row" style="margin-bottom: 0px">
        <form class="form-group mb-3" method="post" th:action="@{/operador/search}">
            <div class="row">
                <div class="col-8">
                    <input class="form-control" placeholder="Texto a buscar" name="busqueda" >
                </div>
                <div class="col-2">
                    <select class="form-select" name="categoria" >
                        <option value="Nombre">Nombre</option>
                        <option value="Género">Género</option>
                    </select>
                </div>
               <div class="col">
                   <button class="btn btn-outline-primary" type="submit">Buscar</button>
                   <a class="btn btn-outline-danger ml-2" th:href="@{/operador}">Limpiar</a>
               </div>
            </div>
        </form>
    </div>
        <div class="row" style="text-align: center;margin-bottom: 0px" >
            <div class="col-6"></div>

            <div class="col"> <a class="btn btn-success" th:href="@{/operador/reporte}">Generar Reporte <i class="bi bi-download"></i></a>
            </div>
            <div class="col" style="text-align: center">
                <a class="btn btn-success" th:href="@{/operador/crearfuncion}" style=" background-color: black !important;">Agregar Funcion</a>
            </div>
            <div class="col" style="text-align: center">
                <a class="btn btn-success" th:href="@{/operador/estadisticas}" style=" background-color: #f82249 !important;">Estadisticas</a>
            </div>
        </div>
    <div class="row">

        <div class="col">
            <table class="table", id="funciones">
                <thead class="thead-dark">
                    <tr>
                        <th style="text-align: center;" scope="col">Nombre de la obra</th>
                        <th style="text-align: center;" scope="col">Fecha y Hora</th>
                        <th style="text-align: center;" scope="col">Sede</th>
                        <th style="text-align: center;" scope="col">Género</th>
                        <th style="text-align: center;" scope="col">Editar</th>
                        <th style="text-align: center;" scope="col">Estado</th>
                        <th style="text-align: center;" scope="col">Restricion de edad</th>
                        <th style="text-align: center;" scope="col">Borrar</th>

                    </tr>
                </thead>
                <tbody>
                    <tr th:each="funcion : ${listaFunciones}">
                        <td style="text-align: center;"th:text="${funcion.idobra.nombre}">Movidick</td>
                        <td style="text-align: center;" th:text="${funcion.fecha} + '  ' + ${funcion.horainicio}">Hoy xd</td>
                        <td style="text-align: center;" th:text="${funcion.idsala.idsede.nombre}">San Miguel</td>
                        <td style="text-align: center;" th:text="${funcion.idobra.generoIdgenero.nombre}">San Miguel</td>
                        <td style="text-align: center;" th:if="${funcion.valido==true}"><a class="btn btn-outline-danger" th:href="@{'/operador/edit' + '?id=' + ${funcion.id}}" th:hidden="${funcion.valido!=true}" ><i class="bi bi-pencil-square"></i></a></td>
                        <!--td style="text-align: center;"><a class="btn btn-outline-danger" th:href="@{'/operador/edit' + '?id=' + ${funcion.id}}" th:if="${funcion.valido==true}" disabled ><i class="bi bi-pencil-square"></i></a></td-->
                        <td style="text-align: center;"th:if="${funcion.valido!=true}"><a type="button" class="btn btn-secondary" disabled><i class="bi bi-pencil-square"></i></a></td>
                        <td style="text-align: center;" th:text="${funcion.valido == true ? 'Vigente' : 'No vigente'}">Vigente</td>
                        <td style="text-align: center;" th:if="${funcion.idobra.restricciondeedad!=0}" th:text="'+'+${funcion.idobra.restricciondeedad}">+18</td>
                        <td style="text-align: center;" th:if="${funcion.idobra.restricciondeedad==0}">Apto para todo público</td>
                        <td style="text-align: center;"><a class="btn btn-danger" th:href="@{'/operador/delete?id='+${funcion.id}}"><i class="bi bi-trash"></i></a></td>
                    </tr>

                </tbody>
            </table>
        </div>
    </div>

</div>

<script src="https://code.jquery.com/jquery-3.5.1.js"

        crossorigin="anonymous">
</script>

<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"
        crossorigin="anonymous">
</script>

<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap5.min.js"
        crossorigin="anonymous">
</script>
<script>
    $(document).ready( function () {
        $('#funciones').DataTable({
            language: {
                processing: "Tratamiento en curso...",
                infoEmpty: "No existen datos.",
                loadingRecords: "Cargando...",
                zeroRecords: "No se encontraron datos con tu busqueda",
                emptyTable: "No hay datos disponibles en la tabla.",
                lengthMenu: "",
                info: "",
                infoEmpty: "No existen datos.",
                infoFiltered: "(filtrado de _MAX_ elementos en total)",
                infoPostFix: "",
                paginate: {
                    first: "Primero",
                    previous: "Anterior",
                    next: "Siguiente",
                    last: "Ultimo"
                },
                aria: {
                    sortAscending: ": active para ordenar la columna en orden ascendente",
                    sortDescending: ": active para ordenar la columna en orden descendente"
                }
            },
            scrollY: 300,
            lengthMenu: [ [5, 10, -1], [5, 10, "All"] ],
            "searching": false,
            "ordering": false,
        });
    } );

</script>

<footer th:replace="/includes/footer.html :: footer"></footer>
</body>
</html>